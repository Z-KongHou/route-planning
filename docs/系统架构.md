# 智能路线规划系统 - 系统架构

## 1. 项目概述

本项目是一个基于 **React + Vite** 与 **高德地图 JavaScript API** 开发的纯前端“智能路线规划”系统，用户可以输入起点与终点，系统会自动呈现最优路线，并支持路线收藏、编辑、删除以及本地持久化。

## 2. 技术栈

| 模块     | 技术                    | 版本   | 用途                 |
| -------- | ----------------------- | ------ | -------------------- |
| 框架     | React                   | 19.1.1 | 构建用户界面         |
| 构建工具 | Vite                    | 7.1.7  | 项目构建与开发服务器 |
| 路由     | React Router            | 7.9.6  | 单页面应用路由管理   |
| 状态管理 | Context API             | -      | 组件状态管理         |
| 地图 API | 高德地图 JS API         | -      | 地图渲染与路线规划   |
| UI       | Tailwind CSS            | 4.1.17 | 样式管理             |
| 持久化   | localStorage            | -      | 本地数据存储         |
| 地图加载 | @amap/amap-jsapi-loader | 1.0.1  | 高德地图 API 加载器  |

## 3. 系统架构设计

### 3.1 整体架构

```
┌─────────────────────────────────────────────────────────────┐
│                    智能路线规划系统                          │
├─────────────────┬─────────────────┬─────────────────────────┤
│   表现层        │   业务逻辑层    │    数据层               │
├─────────────────┼─────────────────┼─────────────────────────┤
│  React 组件     │  路线规划逻辑   │  localStorage           │
│  Tailwind CSS   │  收藏管理逻辑   │                         │
│  高德地图渲染   │  本地存储逻辑   │                         │
└─────────────────┴─────────────────┴─────────────────────────┘
```

### 3.2 组件结构

```
┌─────────────────────────────────────────────────────────────┐
│                          App                                │
├─────────────────────────────────────────────────────────────┤
│                    React Router                             │
├───────────────┬─────────────────────────────────────────────┤
│  HomePage     │                AboutPage                    │
│  (地图页面)   │                (关于页面)                    │
├───────────────┼─────────────────────────────────────────────┤
│  MapComponent │                                             │
│  (地图组件)   │                                             │
├───────────────┼─────────────────────────────────────────────┤
│  RouteInput   │                                             │
│  (路线输入)   │                                             │
├───────────────┼─────────────────────────────────────────────┤
│  RouteResult  │                                             │
│  (路线结果)   │                                             │
└───────────────┴─────────────────────────────────────────────┘
```

### 3.3 核心功能模块

#### 3.3.1 路线规划模块

- **功能描述**：根据用户输入的起点和终点，调用高德地图 API 获取最优路线
- **核心流程**：
  1. 用户输入起点和终点
  2. 系统调用高德地图路线规划 API
  3. API 返回路线数据
  4. 系统解析数据并在地图上渲染路线
  5. 系统展示路线信息（距离、时间、关键路段）

#### 3.3.2 路线收藏模块

- **功能描述**：管理用户收藏的路线，支持增删改查
- **核心流程**：
  1. 用户查看路线详情
  2. 用户点击收藏按钮
  3. 系统将路线信息存储到 localStorage
  4. 用户可以在收藏页查看、编辑或删除收藏的路线

#### 3.3.3 本地存储模块

- **功能描述**：将用户收藏的路线持久化到本地
- **核心流程**：
  1. 用户收藏或修改路线
  2. 系统将数据序列化并存储到 localStorage
  3. 页面加载时，系统从 localStorage 读取数据并恢复状态

## 4. 目录结构

```
├── dist/              # 构建输出目录
│   ├── assets/        # 静态资源
│   └── index.html     # 主HTML文件
├── docs/              # 项目文档
│   ├── 系统架构.md     # 系统架构设计
│   └── 需求说明书.md   # 需求说明文档
├── public/            # 公共静态资源
├── src/               # 源代码目录
│   ├── assets/        # 项目资源
│   ├── pages/         # 页面组件
│   │   ├── AboutPage.jsx  # 关于页面
│   │   └── HomePage.jsx   # 首页（地图 + 路线规划）
│   ├── App.jsx        # 根组件
│   ├── App.css        # 全局样式
│   ├── index.css      # 基础样式
│   ├── main.jsx       # 入口文件
│   └── routes.jsx     # 路由配置
├── .env               # 环境变量配置
├── .gitignore         # Git忽略文件
├── README.md          # 项目说明文档
├── eslint.config.js   # ESLint配置
├── index.html         # HTML模板
├── package.json       # 项目配置
├── pnpm-lock.yaml     # 依赖锁定文件
└── vite.config.js     # Vite配置
```

## 5. 系统运行流程

### 5.1 用户视角流程

```
用户输入起点和终点 → 系统请求高德路线 → 地图渲染路线 →
用户可选择收藏 → 可管理收藏（编辑/删除） →
系统可依据偏好推荐最优路线
```

### 5.2 技术实现流程

```
1. 页面加载 → 初始化地图
2. 用户输入起点/终点 → 表单验证
3. 点击搜索 → 调用高德地图API
4. API返回数据 → 解析路线信息
5. 渲染地图路线 → 展示路线详情
6. 用户收藏路线 → 数据存储到localStorage
7. 页面刷新 → 从localStorage恢复数据
```

## 6. 关键技术点

### 6.1 高德地图 API 集成

- 使用 @amap/amap-jsapi-loader 加载高德地图 API
- 配置 API 密钥和安全密钥
- 调用路线规划 API 获取路线数据
- 在地图上渲染路线和标记点

### 6.2 React Router 路由管理

- 配置首页和关于页面的路由
- 使用 React Router 实现页面导航
- 支持路由参数传递

### 6.3 本地存储实现

- 使用 localStorage 存储用户收藏的路线
- 实现数据的序列化和反序列化
- 支持数据的增删改查操作

### 6.4 响应式设计

- 使用 Tailwind CSS 实现响应式布局
- 适配不同屏幕尺寸
- 优化移动端体验

## 7. 未来扩展方向

- 支持路线多方案比较
- 获取实时交通拥堵信息
- 加入用户登录系统（带后端）
- 收藏同步云端
- 自动推荐“更便宜/更快/更安全的路线”
